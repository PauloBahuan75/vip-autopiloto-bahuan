<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lista VIP Bahuan Im√≥veis | Lan√ßamentos, Em Obras e Pronto em SP e Cotia</title>
  <meta name="description" content="Entre na Lista VIP da Bahuan Im√≥veis e receba oportunidades filtradas em Morumbi, Santo Amaro, Butant√£, Vila S√¥nia, Vila Andrade e Cotia (e regi√£o)." />

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FKWHL1D7R5"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-FKWHL1D7R5');
  </script>

  <link rel="stylesheet" href="../assets/css/styles.css" />

  <style>
    .container{max-width:980px;margin:0 auto;padding:0 16px;}
    .btn{display:inline-block;padding:12px 16px;border-radius:10px;text-decoration:none;font-weight:700}
    .btn.primary{background:#111;color:#fff;border:0;cursor:pointer}
    .btn.wa{background:#25D366;color:#fff}
    .muted{color:#666}
    .card{background:#fff;border:1px solid #eaeaea;border-radius:14px;padding:14px}
    .grid{display:grid;gap:12px}
    @media(min-width:760px){.grid{grid-template-columns:repeat(3,1fr)}}
    input,select{width:100%;padding:12px;border-radius:10px;border:1px solid #ddd}
    label{display:block;margin:10px 0 6px;font-weight:700}
    .row{display:grid;gap:12px}
    @media(min-width:760px){.row{grid-template-columns:1fr 1fr}}
    .topbar{padding:16px 0;border-bottom:1px solid #eee;background:#fff;position:sticky;top:0;z-index:5}
    .nav{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .logo{font-weight:900}
    .hero{padding:22px 0}
    .hero h1{margin:0 0 10px}
    .pill{display:inline-block;padding:6px 10px;border-radius:999px;background:#fff;color:#111;border:1px solid rgba(0,0,0,.12);font-size:12px;margin-bottom:10px}
    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .okbox{display:none;margin-top:16px}
    .okbox.show{display:block}
    .warn{background:#fff3cd;border:1px solid #ffd28a;padding:12px;border-radius:12px;color:#111}
    .warn *{color:#111}
  </style>
</head>

<body>
  <div class="topbar">
    <div class="container">
      <div class="nav">
        <div class="logo">VIP Autopiloto ¬∑ Bahuan Im√≥veis</div>
        <div class="actions">
          <a class="btn primary" href="../">Home</a>
          <a class="btn wa" id="btnWaTop" href="#">Falar no WhatsApp agora</a>
        </div>
      </div>
    </div>
  </div>

  <header>
    <div class="container hero">
      <span class="pill">Lista VIP ‚Ä¢ Oportunidades filtradas</span>
      <h1>Receba op√ß√µes de lan√ßamento, em obras e pronto para morar ‚Äî com filtro real pelo seu perfil.</h1>
      <p class="muted">Voc√™ informa <strong>bairro</strong>, <strong>entrada</strong> e <strong>prazo</strong>. A gente prioriza somente o que faz sentido e te atende no WhatsApp com contexto.</p>

      <div class="grid" style="margin-top:14px;">
        <div class="card"><strong>Filtro por momento</strong><div class="muted">Entrada e prazo definem prioridade.</div></div>
        <div class="card"><strong>Atendimento r√°pido</strong><div class="muted">WhatsApp com contexto j√° preenchido.</div></div>
        <div class="card"><strong>Regi√µes foco</strong><div class="muted">Zona Sul/Oeste de SP + Cotia (e regi√£o).</div></div>
      </div>

      <div class="warn" style="margin-top:16px;">
        <strong>Importante:</strong> Voc√™ pode entrar na lista agora e, se quiser, j√° clicar no WhatsApp. Se preferir, preencha o formul√°rio (leva 30s) para receber op√ß√µes mais certas.
      </div>
    </div>
  </header>

  <main>
    <div class="container" style="padding:18px 0 34px;">
      <h2 style="margin:0 0 6px;">Entrar na Lista VIP</h2>

      <div class="actions" style="margin:12px 0 10px;">
        <a class="btn wa" id="btnWaBig" href="#" style="font-size:16px; padding:14px 18px;">
          üî• Falar no WhatsApp agora (mais r√°pido)
        </a>
      </div>

      <p class="muted" style="margin-top:0;">Preencha para receber oportunidades compat√≠veis com seu perfil.</p>

      <form id="vipForm" class="card" style="margin-top:12px;">
        <input type="hidden" id="src" name="src" value="SITE" />
        <input type="hidden" id="page" name="page" value="" />

        <div class="row">
          <div>
            <label for="nome">Seu nome</label>
            <input id="nome" name="nome" type="text" placeholder="Ex.: Paulo" required />
          </div>
          <div>
            <label for="whatsapp">Seu WhatsApp</label>
            <input id="whatsapp" name="whatsapp" type="tel" placeholder="(11) 99999-9999" required />
            <div class="muted" style="font-size:12px;margin-top:6px;">Dica: coloque com DDD.</div>
          </div>
        </div>

        <div class="row">
          <div>
            <label for="bairro">Bairro / regi√£o de interesse</label>
            <select id="bairro" name="bairro" required>
              <option value="">Selecione‚Ä¶</option>
              <option>Morumbi</option>
              <option>Santo Amaro</option>
              <option>Butant√£</option>
              <option>Vila S√¥nia</option>
              <option>Vila Andrade</option>
              <option>Cotia e regi√£o</option>
              <option>Outros (Zona Sul/Oeste)</option>
            </select>
          </div>
          <div>
            <label for="tipo">Tipo de oportunidade</label>
            <select id="tipo" name="tipo" required>
              <option value="">Selecione‚Ä¶</option>
              <option>Lan√ßamento</option>
              <option>Em obras</option>
              <option>Pronto para morar</option>
              <option>Tanto faz</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div>
            <label for="entrada">Valor aproximado de entrada</label>
            <select id="entrada" name="entrada" required>
              <option value="">Selecione‚Ä¶</option>
              <option>At√© R$ 10 mil</option>
              <option>R$ 11 mil a R$ 20 mil</option>
              <option>R$ 21 mil a R$ 50 mil</option>
              <option>Acima de R$ 50 mil</option>
            </select>
          </div>
          <div>
            <label for="prazo">Prazo para comprar</label>
            <select id="prazo" name="prazo" required>
              <option value="">Selecione‚Ä¶</option>
              <option>Imediato</option>
              <option>At√© 3 meses</option>
              <option>At√© 6 meses</option>
              <option>At√© 12 meses</option>
              <option>Acima de 12 meses</option>
            </select>
          </div>
        </div>

        <div class="actions" style="margin-top:14px;">
          <button class="btn primary" type="submit" id="btnSubmit">Entrar na Lista VIP</button>
          <a class="btn wa" id="btnWaMid" href="#">Preferir WhatsApp agora</a>
        </div>

        <div class="muted" style="font-size:12px;margin-top:10px;">
          Ao enviar, voc√™ concorda em receber contato da Bahuan Im√≥veis pelo WhatsApp sobre as oportunidades solicitadas.
        </div>

        <div id="okbox" class="okbox card" style="border-color:#c7f0d2;">
          <strong>Cadastro enviado ‚úÖ</strong>
          <div class="muted" style="margin-top:6px;">Para acelerar, clique abaixo e me diga seu perfil. (O WhatsApp abre com contexto.)</div>
          <div class="actions" style="margin-top:10px;">
            <a class="btn wa" id="btnWaAfter" href="#">Abrir WhatsApp agora</a>
            <a class="btn primary" href="../">Voltar para Home</a>
          </div>
        </div>
      </form>
    </div>
  </main>

  <footer>
    <div class="container" style="padding:18px 0;border-top:1px solid #eee;">
      Bahuan Im√≥veis ¬∑ SP e Cotia ¬∑ WhatsApp: <a href="https://wa.me/5511996900033">(11) 99690-0033</a>
    </div>
  </footer>

  <script>
    const WEBAPP_URL = "https://script.google.com/macros/s/AKfycbzlSDAshFhVL0HJ1y1VTEdJVENb7QO5LSXEaCahyEsSIijVtjRVhL5RDAjCBz1uEpmn1g/exec";
    const BASE_W_PATH = "../w/";

    const qs = new URLSearchParams(window.location.search);
    const srcBase = qs.get("src") || "SITE";
    const pagePath = window.location.pathname + window.location.search;

    document.getElementById("src").value = srcBase;
    document.getElementById("page").value = pagePath;

    function newEid(){
      return Date.now().toString(36) + "-" + Math.random().toString(36).slice(2, 10);
    }

    // WhatsApp links via /w/
    function buildWUrl(extraTag) {
      const src = encodeURIComponent(srcBase + (extraTag ? ("-" + extraTag) : ""));
      const page = encodeURIComponent(pagePath);
      return `${BASE_W_PATH}?src=${src}&page=${page}`;
    }
    document.getElementById("btnWaTop").href   = buildWUrl("VIPTOP");
    document.getElementById("btnWaBig").href   = buildWUrl("VIPBIG");
    document.getElementById("btnWaMid").href   = buildWUrl("VIPMID");
    document.getElementById("btnWaAfter").href = buildWUrl("VIPAFTER");

    // Envio robusto (pode tentar mais de 1, mas dedupe no Apps Script via eid)
    function sendEvent(payload){
      try {
        if (navigator.sendBeacon) {
          const blob = new Blob([JSON.stringify(payload)], { type: "text/plain;charset=UTF-8" });
          navigator.sendBeacon(WEBAPP_URL, blob);
        }
        fetch(WEBAPP_URL, { method:"POST", body: JSON.stringify(payload), keepalive:true, mode:"no-cors" }).catch(()=>{});
      } catch(e) {}
    }

    // ===== VISITS: 1 vez por aba/p√°gina =====
    (function(){
      const key = "VIP_VISIT_SENT::" + pagePath;
      if (sessionStorage.getItem(key) === "1") return; // j√° enviou nessa aba
      sessionStorage.setItem(key, "1");

      const payload = {
        type:"pageview",
        payload:{ eid: newEid(), src: srcBase, page: pagePath, ua: navigator.userAgent }
      };
      sendEvent(payload);
    })();

    // ===== LEAD: trava duplo submit + mesmo eid em tudo =====
    const form = document.getElementById("vipForm");
    const okbox = document.getElementById("okbox");
    const btnSubmit = document.getElementById("btnSubmit");

    let sendingLead = false;

    form.addEventListener("submit", (ev) => {
      ev.preventDefault();
      if (sendingLead) return;
      sendingLead = true;

      btnSubmit.disabled = true;
      btnSubmit.textContent = "Enviando‚Ä¶";

      const eid = newEid();

      const lead = {
        eid,
        nome: (document.getElementById("nome").value || "").trim(),
        whatsapp: (document.getElementById("whatsapp").value || "").trim(),
        bairro: document.getElementById("bairro").value || "",
        tipo: document.getElementById("tipo").value || "",
        entrada: document.getElementById("entrada").value || "",
        prazo: document.getElementById("prazo").value || "",
        src: srcBase,
        page: pagePath,
        ua: navigator.userAgent
      };

      // 1) POST
      sendEvent({ type:"lead", payload: lead });

      // 2) fallback GET com o MESMO eid (o Script deduplica)
      const qsLead = new URLSearchParams({
        event:"lead",
        eid: lead.eid,
        src: lead.src,
        nome: lead.nome,
        whatsapp: lead.whatsapp,
        bairro: lead.bairro,
        tipo: lead.tipo,
        entrada: lead.entrada,
        prazo: lead.prazo,
        page: lead.page,
        ua: lead.ua
      });
      (new Image()).src = `${WEBAPP_URL}?${qsLead.toString()}`;

      okbox.classList.add("show");
      okbox.scrollIntoView({ behavior:"smooth", block:"start" });

      btnSubmit.textContent = "Enviado ‚úÖ";
      setTimeout(() => {
        btnSubmit.disabled = false;
        btnSubmit.textContent = "Entrar na Lista VIP";
        sendingLead = false;
      }, 1200);
    });
  </script>
</body>
</html>
